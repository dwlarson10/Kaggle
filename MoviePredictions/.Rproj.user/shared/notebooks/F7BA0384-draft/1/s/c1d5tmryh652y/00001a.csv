"0","require(stringi)"
"0","require(lubridate)"
"0",""
"0","genre_matching = ""Comedy|Horror|Attion|DramaDoocumentary|Science Fiction|Crime|Fantasy|Thriller|Animation|Adventure|Mystery|War|Romance|Music|Family|Western|History|TV Movie|Foreign"""
"0","df <- df%>%mutate(mainGenre = str_extract(genres,genre_matching),"
"0","                  PartOfCollection=stri_extract(belongs_to_collection, regex = ""(?<=name\\'\\:\\s\\').+(?=\\'\\,\\s\\'poster)""),"
"0","                                                                              "
"0","                  collectionTF = case_when(is.na(PartOfCollection)==TRUE~'No Collection',"
"0","                                           T~'Collection'),"
"0","                  castSize = str_count(cast, 'name'),"
"0","                  castFemale = str_count(cast, 'gender\'\\:\\s1'),"
"0","                  castMale = str_count(cast, 'gender\'\\:\\s2'),"
"0","                  crewSize = str_count(crew, 'name'),"
"0","                  crewMale = str_count(crew, 'gender\'\\:\\s2'),"
"0","                  percentFemale = castFemale/castSize,"
"0","                  #directorGender = str_count(crew, 'Direction\\,\\gender\'\\:\\s2')"
"0","                  countGenres = str_count(genres,'name'),"
"0","                  prodCompCount = str_count(production_companies,'name'),"
"0","                  prodCountriesCount = str_count(production_countries,'name'), "
"0","                  release_date2 = as_date(release_date,format='%m/%d/%y',tz=""UTC""),"
"0","                  release_year = year(release_date2)"
"0","                  )"
"0",""
"0","df%>%group_by(mainGenre)%>%summarise(count=n(),gross=round(mean(revenue,na.rm=T),0))%>%"
"0","  ggplot(aes(x=mainGenre,y=count,fill=gross))+"
"0","  geom_bar(stat='Identity')+coord_flip()"
